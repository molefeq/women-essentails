function errorController(n,t,i){t.isLoading=!1;n.closeDialog=function(){i.dismiss()}}var app=app||{},menus,anonymousStates;(function(n){var i=function(){},t=5;n.Columns=[];n.SubColumns=[];n.IsHierachyGrd=!1;n.Paging={IsFirstPage:!1,IsLastPage:!1,TotalPages:0,Pages:[],PageIndex:0,PageSize:10,CurrentItemsCount:10};n.PageSizes=[];n.DataSource={};n.SubItemsField="";n.ExpandMode="Collapse";n.DisplayItemExpand=function(t){return t[n.SubItemsField]&&t[n.SubItemsField].length};n.ExpandIconClass=function(){return n.ExpandMode.toLowerCase()=="expand"?"opened":"closed"};n.ExpandRowClass=function(){return n.ExpandMode.toLowerCase()=="expand"?"expandRow":"closeRow"};n.SetPage=function(t,i){t&&t.preventDefault();n.Paging.PageIndex=i;n.Read()};n.Read=function(t){var r=n.Paging.PageSize,u=n.Paging.PageSize*(n.Paging.PageIndex-1);window.scrollTo(0,0);t&&(i=t);i({take:r,skip:u})};n.PageSizeChange=function(){n.Paging.PageIndex=1;n.Read()};n.isNormalColumn=function(n){return!n.Filter&&!n.TemplateId};n.isFormatColumn=function(n){return n.Filter&&n.Filter.Format&&!n.TemplateId};n.isTemplateColumn=function(n){return n.TemplateId};n.isNormalHeader=function(n){return!n.HeaderTemplateId};n.isTemplateHeader=function(n){return n.HeaderTemplateId};n.setOptions=function(t){t.PageSizes&&(n.PageSizes=t.PageSizes);t.Columns&&(n.Columns=t.Columns);t.SubColumns&&(n.SubColumns=t.SubColumns);t.Paging&&(n.Paging=t.Paging);t.Read&&(i=t.Read);t.SubItemsField&&(n.SubItemsField=t.SubItemsField);t.ExpandMode&&(n.ExpandMode=t.ExpandMode);t.IsHierachyGrd&&(n.IsHierachyGrd=t.IsHierachyGrd)};n.SetDataSource=function(t,i){n.DataSource={Data:t,Total:i};n.SetPages(i)};n.SetPages=function(i){var f;n.Paging.IsLastPage=!1;n.Paging.Pages=[];n.Paging.TotalPages=Math.ceil(i/n.Paging.PageSize);var e=Math.floor(n.Paging.PageIndex/t),u=e==0?1:e*t,r=e==0?t:u+(t-1),o=n.Paging.PageIndex*n.Paging.PageSize;for(r>=n.Paging.TotalPages&&(r=n.Paging.TotalPages,u=u==1||r-t<1?1:r-t),f=u;f<=r;f++)n.Paging.Pages.push(f);n.Paging.IsFirstPage=n.Paging.PageIndex===1;n.Paging.IsLastPage=n.Paging.PageIndex===n.Paging.TotalPages||n.Paging.TotalPages==0;n.Paging.CurrentItemsCount=o>=i?i:o}})(app.CustomGrid={});app=app||{};app.SubFormValidator=function(){function s(){var u=$(t).find("[name]"),i,r;for(n={},i=0;i<u.length;i++){n[$(u[i]).attr("name")]={error:!1};for(r in o)$(u[i]).attr("sub-form-"+r)&&(n[$(u[i]).attr("name")][r]={error:!1,message:$(u[i]).attr("sub-form-"+r+"-msg")},r=="pattern"&&(n[$(u[i]).attr("name")][r].pattern=$(u[i]).attr("sub-form-"+r)),r=="minlength"&&(n[$(u[i]).attr("name")][r].minlength=$(u[i]).attr("sub-form-"+r)),r=="maxlength"&&(n[$(u[i]).attr("name")][r].maxlength=$(u[i]).attr("sub-form-"+r)))}}function f(n,t,i){var u=$(n).find("div[data-for="+t+"]"),f=$(u).parent();if(!i){r(u,"k-valid-msg","k-invalid-msg");r(f,null,"haserror");return}r(u,"k-invalid-msg","k-valid-msg");r(f,"haserror",null);$(u).text(i)}function r(n,t,i){$(n)&&$(n).length>0&&$(n).hasClass(i)&&i&&$(n).removeClass(i);$(n)&&$(n).length>0&&!$(n).hasClass(t)&&t&&$(n).addClass(t)}var u=this,i=!0,n={},t=null,e=null,o={required:{},maxlength:{},pattern:{}};u.initialise=function(n,i){t=n;e=i;s()};u.isValid=function(r){var e,o,s,h;u.clearValidationMessages();for(e in n)if(e!="IsValid"){if(o=e.split("_").length==1?e:e.split("_")[e.split("_").length-1],n[e].required&&!r[o]&&!n[e].error){n[e].error=!0;i=!1;f(t,e,n[e].required.message);continue}if(n[e].maxlength&&r[o]&&r[o].length>n[e].maxlength&&!n[e].error){n[e].error=!0;i=!1;f(t,e,n[e].maxlength.message);continue}if(n[e].minlength&&r[o]&&r[o].length<n[e].minlength&&!n[e].error){n[e].error=!0;i=!1;f(t,e,n[e].minlength.message);continue}n[e].pattern&&r[o]&&(s=n[e].pattern.pattern.substring(1,n[e].pattern.pattern.length-1),h=new RegExp(s),h.test(r[o])||n[e].error||(n[e].error=!0,i=!1,f(t,e,n[e].pattern.message)))}return i};u.clearValidationMessages=function(){var u,f;i=!0;for(u in n)u!="IsValid"&&(n[u].error=!1,f=$(t).find("div[data-for="+u+"]"),r(f,"k-valid-msg","k-invalid-msg"),r(f.parent(),null,"haserror"),f.text(""))}};app=app||{},function(n){function s(n,t){var r=$(t).siblings('div[data-for="'+$(t).attr("name")+'"]').first(),u,i;if(!n||!n.$invalid){f(r,null,$(t).parent());return}for(u in n.$error)i=$(t).attr("data-"+u+"-msg"),i&&f(r,i,$(t).parent())}function f(n,t,r){if(!t){i(n,"k-valid-msg","k-invalid-msg");i(r,null,"haserror");return}i(n,"k-invalid-msg","k-valid-msg");i(r,"haserror",null);$(n).text(t)}function i(n,t,i){$(n)&&$(n).length>0&&$(n).hasClass(i)&&i&&$(n).removeClass(i);$(n)&&$(n).length>0&&!$(n).hasClass(t)&&t&&$(n).addClass(t)}function h(n){var t=u[r];$(n.Element).find("[data-for]").each(function(i,r){var o=$(r).attr("data-for"),e,h;t[n.Name][o].$setValidity("custom",!0);var u=Object.keys(t[n.Name][o].$error),s=$(r).parent(),c=s.find("[name="+o+"]")[0];if(u&&u.length>0)for(e=0;e<u.length;e++)h=$(c).attr("data-"+u[e]+"-msg"),f(r,h,s);else f(r,null,s)})}function o(n){$(n).find("div[data-valmsg-summary=true]").empty();i($(n).find("div[data-valmsg-summary=true]"),"summary-validation-valid","summary-validation-invalid")}function c(n,t){for(var i,o,s,h,e=0;e<n.length;e++)(i=n[e],o=i.KeyField?$(t.Element).find('[name="'+i.KeyField+'"]'):null,i.KeyFieldMessages&&i.KeyFieldMessages.length!=0)&&((o==null||$(o).length==0)&&i.KeyFieldMessages&&i.KeyFieldMessages.length>0||(n[e].IsFound=!0,s=$(t.Element).find("[data-for="+i.KeyField+"]"),h=$(s).parent(),u[r][t.Name][i.KeyField].$setValidity("custom",!1),f(s,i.KeyFieldMessages[0],h)))}function l(n){var t=$("#"+$(e).attr("validation-summary-id")),r,u;if(t&&t.length!=0&&n&&n.length!=0){for(t.empty(),r=0;r<n.length;r++)u="<div>"+n[r]+"<\/div>",$(t).append(u);i(t,"summary-validation-invalid","summary-validation-valid")}}var r,e,t=[],u={};n.initialise=function(n,i,f){e=n;t=i;u=f;r=$(n).attr("name")};n.resetControl=function(n){var t=$(n).closest("ng-form").attr("name"),i=u[r][t][$(n).attr("name")];u[r][t][$(n).attr("name")].$setValidity("custom",!0);s(i,$(n))};n.validateTabs=function(){for(var n=0;n<t.length;n++)o(t[n].Element),h(t[n])};n.displayServerErrors=function(n){for(var i=0;i<t.length;i++)o(t[i].Element),c(n,t[i]);for(i=0;i<n.length;i++)n[i].IsFound||l(n[i].KeyFieldMessages)};n.clearServerErrors=function(){var n=$("#"+$(e).attr("validation-summary-id"));n&&n.length!=0&&i(n,"summary-validation-valid","summary-validation-invalid")}}(app.TabFormValidator={});app=app||{},function(n){function t(n){return n.split("/")[2].split(" ")[0]}function i(n){return n.split("/")[1]-1}function r(n){return n.split("/")[0]}function u(n){return n.split("/").length>2&&n.split("/")[2].split(" ").length>1?n.split("/")[2].split(" ")[1].split(":")[0]:"0"}function f(n){return n.split("/").length>2&&n.split("/")[2].split(" ").length>1?n.split("/")[2].split(" ")[1].split(":")[1]:"0"}function e(n){return n.split("/").length>2&&n.split("/")[2].split(" ").length>1?n.split("/")[2].split(" ")[1].split(":")[2]:"0"}n.setNonCachedImageFileName=function(n){var t=new Date,i=t.getHours(),r=t.getMinutes(),u=t.getSeconds();return n+"?imagedate="+i+":"+r+":"+u};n.indexOf=function(n,t,i){var o=-1,r,u,e,f;if(!n)return o;for(r=0;r<n.length;r++){if(u=n[r],i)for(e=i.split("."),f=0;f<e.length;f++)u=u[e[f]];if(u==t)return r}return o};n.clearArray=function(n){var i,t;if(n&&n.length)for(i=n.length,t=0;t<i;t++)n.pop()};n.calculateAmountExclVat=function(n,t){if(!n||!t||isNaN(n)||isNaN(t))return 0;var r=parseFloat(t).round(2)/100,i=parseFloat(n).round(2);return parseFloat(i-r*i).round(2)};n.calculateAmountInclVat=function(n,t){if(!n||!t||isNaN(n)||isNaN(t))return 0;var r=parseFloat(t).round(2)/100,i=parseFloat(n).round(2);return parseFloat(r*i+i).round(2)};n.calculateAmountInclVat=function(n,t){if(!n||!t||isNaN(n)||isNaN(t))return 0;var r=parseFloat(t).round(2)/100,i=parseFloat(n).round(2);return parseFloat(r*i+i).round(2)};n.isDateLesser=function(n,o){if(n==""||o=="")return!0;var s=new Date(t(o),i(o),r(o),u(o),f(o),e(o)),h=new Date(t(n),i(n),r(n),u(n),f(n),e(n));return h<s};n.isDateLesserOrEqual=function(n,o){if(n==""||o=="")return!0;var s=new Date(t(o),i(o),r(o),u(o),f(o),e(o)),h=new Date(t(n),i(n),r(n),u(n),f(n),e(n));return h<=s};n.isDateGreaterThanToday=function(n){if(n=="")return!0;var o=new Date,s=new Date(t(n),i(n),r(n),u(n),f(n),e(n));return o.setHours(0,0,0,0),s>=o};n.isDateLesserThanToday=function(n){if(n=="")return!0;var o=new Date,s=new Date(t(n),i(n),r(n),u(n),f(n),e(n));return s<=o};n.createYearRange=function(){var r=new Date,i=r.getFullYear(),t=[],n;for(t.push(i),n=1;n<10;n++)t.push(i-n);return t};Number.prototype.round=function(n){return+(Math.round(this+"e+"+n)+"e-"+n)};n.stringToDate=function(n){return n?n instanceof Date?n:new Date(t(n),i(n),r(n)):""}}(app.Utils={});app=app||{},function(n){n.initialise=function(n){n.state("home",{url:"/home",templateUrl:"app/components/home/views/homeView.html",controller:"homeController"}).state("main",{url:"/main",templateUrl:"app/components/main/mainView.html",controller:"mainController"}).state("salons",{url:"/salons",templateUrl:"app/components/salons/salonsView.html",controller:"salonsController"}).state("salon",{url:"/salon/:salonId",templateUrl:"app/components/salon/salonView.html",controller:"salonController"}).state("promotionproducts",{url:"/promotionproducts",templateUrl:"app/components/promotionproducts/promotionProductsView.html",controller:"promotionProductsController"}).state("salondirection",{url:"/salondirection/:salonId",templateUrl:"app/components/salondirection/salonDirectionView.html",controller:"salonDirectionController"})}}(app.RoutesManager={}),function(){"use strict";angular.module("app",["ui.router","ngSanitize","ngCookies","ngResource","ui.bootstrap","toastr","geolocation","uiGmapgoogle-maps"])}(),function(){"use strict";function n(n,i,r,u){r.interceptors.push("appHttpInterceptorFactory");r.defaults.useXDomain=!0;u.debugInfoEnabled(!1);t(n,i)}function t(n,t){t.otherwise("/home");app.RoutesManager.initialise(n)}angular.module("app").config(n);n.$inject=["$stateProvider","$urlRouterProvider","$httpProvider","$compileProvider"]}(),function(){"use strict";angular.module("app").run(["appFactory","$rootScope",function(n,t){t.$on("$stateChangeStart",function(t,i,r,u){n.ManageUrlRedirects(t,u,i)});t.$on("$stateChangeSuccess",function(){})}])}();menus={Company:{MenuItems:[{DisplayName:"Company",path:"company",module:"Company",QueryParameters:["companyId"]},{DisplayName:"Employees",path:"employees",module:"Employees",QueryParameters:["companyId"]},{DisplayName:"Users",path:"companyusers",module:"Company",QueryParameters:["companyId"]}]},Organisation:{MenuItems:[{DisplayName:"Organisation",path:"organisation",module:"Organisation",QueryParameters:["organisationId"]},{DisplayName:"Users",path:"organisationusers",module:"Organisation Users",QueryParameters:["organisationId"]}]},SarsConfigurations:{MenuItems:[{DisplayName:"Tax Tables",module:"Tax Tables",path:"taxtables"},{DisplayName:"Allowances",module:"Allowances",path:"allowances"},{DisplayName:"Pension Rules",module:"Pension Rules",path:"pensionrules"},{DisplayName:"RAF Rules",module:"RAF Rules",path:"rafrules"},{DisplayName:"Medical Aid Credits",module:"Medical Aid Credits",path:"medicalaidcredits"}]}};anonymousStates={login:!0,forgotpassword:!0,resetpassword:!0,changepassword:!0};angular.module("app").constant("ServerBaseUrl","https://sqswomenessentailapiqa.azurewebsites.net/");angular.module("app").constant("ServerApiBaseUrl","https://sqswomenessentailapiqa.azurewebsites.net/api/");angular.module("app").constant("SubMenuItems",menus);angular.module("app").constant("AnonymousStates",anonymousStates),function(){"use strict";function n(n,t,i,r,u,f,e){function s(n){n.preventDefault();i.go("userprofile",{userProfileId:u.User.Id})}function h(n){n.preventDefault();i.go("changepassword")}function c(){i.go("organisation",{organisationId:u.User.OrganisationId})}function l(n){var u={},t;if(o.currentNavItem=n.DisplayName,n.QueryParameters&&n.QueryParameters.length>0)for(t=0;t<n.QueryParameters.length>0;t++)u[n.QueryParameters[t]]=r[n.QueryParameters[t]];i.go(n.path,u)}function a(n){n.preventDefault();i.current.sessionState&&i.current.sessionState.home&&i.go(i.current.sessionState.home)}var o=n;o.appFactory=u;o.viewProfile=s;o.changePassword=h;o.editOrganisation=c;o.goToMenuItem=l;o.goToHome=a;o.subMenuItems=[];o.currentNavItem="";n.$on("server-error-occurred",function(n,t){t.controller=errorController;f.open(t)});n.$on("state-changed",function(n,t){o.currentNavItem="";o.subMenuItems=!o.appFactory.User||!o.appFactory.User.AccessModules?[]:app.RoutesManager.getMenuItems(o.appFactory.User.AccessModules,e,t.name);o.subMenuItems&&o.subMenuItems.length>0&&(o.currentNavItem=o.subMenuItems[0].DisplayName)})}angular.module("app").controller("appController",n);n.$inject=["$scope","$rootScope","$state","$stateParams","appFactory","notificationFactory","SubMenuItems","AnonymousStates"]}(),function(){"use strict";function n(n,t){function i(n,i){if(t.Initialise(),t.User&&t.User.AccessModules&&app.RoutesManager.canModuleAccessRoute(t.User.AccessModules,n.module)){$(i).show();return}$(i).hide()}return{restrict:"A",link:i,scope:{module:"@"}}}angular.module("app").directive("accessControl",n);n.$inject=["$state","appFactory"]}(),function(){"use strict";function n(n){function t(t,i,r){var u=r.appGrid?r.appGrid:"appGrid";t.appGrid=app.CustomGrid;t.appGrid.setOptions(t.gridOptions);n.$broadcast("app-grid-rendered",{name:u,grid:t.appGrid})}return{restrict:"A",link:t,scope:{appGrid:"=",gridOptions:"=appGridOptions"}}}angular.module("app").directive("appGrid",n);n.$inject=["$rootScope"]}(),function(){"use strict";function n(){function n(n,t,i){n.$root[i.name]=new app.SubFormValidator;var r=n.$root[i.name];r.initialise(t,n.$root,i.model);t.on("change","select",function(){r.clearValidationMessages()});t.on("blur",'input[type="password"]',function(){r.clearValidationMessages()});t.on("keyup",'input[type="text"]',function(){r.clearValidationMessages()});t.on("blur",'input[type="text"]',function(){r.clearValidationMessages()});t.on("keyup","textarea",function(){r.clearValidationMessages()});t.on("blur","textarea",function(){r.clearValidationMessages()})}return{restrict:"AE",link:n}}angular.module("app").directive("appSubForm",n)}(),function(){"use strict";function n(){function i(n,t,i,r){var u=app.TabFormValidator;u.initialise(t,r.childForms,n);n.$on("server-validation-error-occurred",function(n,t){u.displayServerErrors(t)});n.$on("server-validation-successfull",function(){u.clearServerErrors()});t.bind("submit",function(){u.validateTabs()});t.on("change","select",function(){u.resetControl(this)});t.on("keyup",'input[type="password"]',function(){u.resetControl(this)});t.on("blur",'input[type="password"]',function(){u.resetControl(this)});n.$on("file-uploaded",function(n,t){u.resetControl(t)});t.on("keyup",'input[type="text"]',function(){u.resetControl(this)});t.on("blur",'input[type="text"]',function(){u.resetControl(this)});t.on("keyup","textarea",function(){u.resetControl(this)});t.on("blur","textarea",function(){u.resetControl(this)})}function n(){return{childForms:[]}}var t={restrict:"A",link:i,controller:n};return n.$inject=["$scope"],t}function t(){function n(n,t,i,r){r[0].childForms.push({Element:t,Name:$(t).attr("name")})}return{restrict:"A",link:n,require:["^appTabsValidator"]}}angular.module("app").directive("appTabsValidator",n);angular.module("app").directive("appTabValidator",t)}(),function(){"use strict";function n(){function u(u,o){var h=f(o),s=$(o).attr("name"),c=$("#"+$(o).attr("validation-summary-id"));o.on("change","select",function(){var n=u[s][$(this).attr("name")];t(n,$(this),o);r(o)});o.on("keyup",'input[type="password"]',function(){var n=u[s][$(this).attr("name")];t(n,$(this),o)});o.on("blur",'input[type="password"]',function(){var n=u[s][$(this).attr("name")];t(n,$(this),o);r(o)});o.on("keyup",'input[type="text"]',function(){var n=u[s][$(this).attr("name")];t(n,$(this),o)});o.on("blur",'input[type="text"]',function(){var n=u[s][$(this).attr("name")];t(n,$(this),o);r(o)});o.on("keyup","textarea",function(){var n=u[s][$(this).attr("name")];t(n,$(this),o)});o.on("blur","textarea",function(){var n=u[s][$(this).attr("name")];t(n,$(this),o)});o.bind("submit",function(){var n,f,l;for(r(o),n=0;n<h.length;n++){var e=o.find("[name="+h[n].Name+"]")[0],c=$(e).parent(),t=Object.keys(u[s][h[n].Name].$error);if(t&&t.length>0){for(f=0;f<t.length;f++)l=$(e).attr("data-"+t[f]+"-msg"),i(h[n].Element,l,c);continue}i(h[n].Element,null,c)}});u.$on("server-validation-error-occurred",function(n,t){for(var r,f,u=0;u<t.length;u++)if(r=t[u],f=r.KeyField?$(o).find('[name="'+r.KeyField+'"]'):null,r.KeyFieldMessages&&r.KeyFieldMessages.length!=0){if((f==null||$(f).length==0)&&r.KeyFieldMessages&&r.KeyFieldMessages.length>0){e(o,r.KeyFieldMessages);continue}i($(o).find('div[data-for="'+r.KeyField+'"]')[0],r.KeyFieldMessages[0],$(f).parent())}});u.$on("server-validation-successfull",function(){c&&c.length!=0&&n(c,"summary-validation-valid","summary-validation-invalid")})}function f(n){var t=[];return $(n).find("[data-for]").each(function(n,i){t.push({Element:i,Name:$(i).attr("data-for")})}),t}function i(t,i,r){if(!i){n(t,"k-valid-msg","k-invalid-msg");n(r,null,"haserror");return}n(t,"k-invalid-msg","k-valid-msg");n(r,"haserror",null);$(t).text(i)}function e(t,i){var r=$("#"+$(t).attr("validation-summary-id")),u,f;if(r&&r.length!=0&&i&&i.length!=0){for(r.empty(),u=0;u<i.length;u++)f="<div>"+i[u]+"<\/div>",$(r).append(f);n(r,"summary-validation-invalid","summary-validation-valid")}}function r(t){$(t).find("div[data-valmsg-summary=true]").empty();n($(t).find("div[data-valmsg-summary=true]"),"summary-validation-valid","summary-validation-invalid")}function n(n,t,i){$(n)&&$(n).length>0&&$(n).hasClass(i)&&i&&$(n).removeClass(i);$(n)&&$(n).length>0&&!$(n).hasClass(t)&&t&&$(n).addClass(t)}function t(n,t,r){var s=$(t).attr("name"),f=$(t).parent(),e=$(r).find('div[data-for="'+s+'"]').first(),o,u;if(!n||!n.$invalid){i(e,null,f);return}for(o in n.$error)u=$(t).attr("data-"+o+"-msg"),u&&i(e,u,f)}return{restrict:"EA",link:u}}angular.module("app").directive("appValidator",n)}(),function(){"use strict";function n(){function n(n,t,i){var r=!1;$(t).on("click",function(){r||($(t).val(i.actionInProgressValue),$(t).prop("disabled",!0));r=!1});n.$on("action-complete",function(n,u){r=u?u:!1;$(t).val(i.actionValue);$(t).prop("disabled",!1)})}return{restrict:"A",link:n}}angular.module("app").directive("buttonControl",n)}(),function(){"use strict";function n(){function n(n,t,i,r){r.$parsers.unshift(function(t){var i=n.compareToField;return r.$isEmpty(t)&&r.$isEmpty(i)?r.$setValidity("compare",!0):r.$setValidity("compare",t==i),t});n.$watch("compareToField",function(n){n?r.$setValidity("compare",n==r.$viewValue):r.$setValidity("compare",!0)})}return{require:"ngModel",restrict:"EA",link:n,scope:{compareToField:"=comparefield"}}}angular.module("app").directive("compare",n)}(),function(){"use strict";function i(){function n(n,t,i,r){r.$parsers.push(function(n){return parseInt(n,10)});r.$formatters.push(function(n){return n?""+n:""})}return{restrict:"A",require:"ngModel",link:n}}function n(n){function t(t,i,r,u){u.$parsers.push(function(t){return n.stringToDate(t)});u.$formatters.push(function(t){return t instanceof Date?t:n.stringToDate(t)})}return{restrict:"A",require:"ngModel",link:t}}function t(n){function t(t,i,r){t.$watch(r.fileUploadInput,function(t,r){t!=r&&n.$broadcast("file-uploaded",$(i))})}return{restrict:"A",require:"ngModel",link:t}}angular.module("app").directive("convertToNumber",i);angular.module("app").directive("convertToDate",n);n.$inject=["utilsFactory"];angular.module("app").directive("fileUploadInput",t);t.$inject=["$rootScope"]}(),function(){"use strict";function n(n){function t(t,i){t.$on("state-menu-changed",function(n,t){$(i).find("li.menuitem a").removeClass("current");$(i).find("li[data-url="+t.name+"] a").addClass("current")});i.on("mouseover","li.menuitem",function(){$(i).find("li.menuitem a").removeClass("current");$(this).find("a").addClass("current")});i.on("mouseout","li.menuitem",function(){$(i).find("li.menuitem a").removeClass("current");$(i).find("li[data-url="+n.current.name+"] a").addClass("current")})}return{restrict:"A",link:t}}angular.module("app").directive("menuHighlight",n);n.$inject=["$state","$rootScope"]}();errorController.$inject=["$scope","$rootScope","$uibModalInstance"],function(){"use strict";function n(){function n(){}return{ManageUrlRedirects:n}}angular.module("app").factory("appFactory",n)}(),function(){"use strict";function n(n,t,i,r){function u(n){return n}function f(n){return i.reject(n)}function e(n){return n}function o(n){return r.handleHttpServerError(n),t.$broadcast("action-complete"),i.reject(n)}return{request:u,requestError:f,response:e,responseError:o}}angular.module("app").factory("appHttpInterceptorFactory",n);n.$inject=["$location","$rootScope","$q","errorFactory"]}(),function(){"use strict";function n(n,t,i,r){function u(t){var u=i.defer();return n({method:"POST",url:r+"Company/GetAppCompanies",data:t}).success(function(n){u.resolve({Companies:n.Items,TotalCompanies:n.TotalItems})}),u.promise}function f(t){var u=i.defer();return n({method:"POST",url:r+"/Company/FetchCompany/?companyId="+t}).success(function(n){u.resolve({Company:n.Item})}),u.promise}return{getCompanies:u,getCompany:f}}angular.module("app").factory("companyApiFactory",n);n.$inject=["$http","$rootScope","$q","ServerApiBaseUrl"]}(),function(){"use strict";function n(n,t,i,r){function u(){var t=i.defer();return n({method:"GET",url:r+"Dashboard/GetData"}).success(function(n){t.resolve({Dashboard:n})}),t.promise}return{getData:u}}angular.module("app").factory("dashboardApiFactory",n);n.$inject=["$http","$rootScope","$q","ServerApiBaseUrl"]}(),function(){"use strict";function n(n){function i(t){var i=t.status,f=n.$new();f.model={ErrorCode:i,ErrorHeader:r(i),ErrorDetails:u(i,t)};n.$broadcast("server-error-occurred",{templateUrl:"errortemplate.html",scope:f,size:"sm"})}function r(n){return n<=0||n>=500?t[0]:t[n]?t[n]:n>=400?t[1]:void 0}function u(n,t){if(n<=0)return"You are not online. Please check your connectivity and try again";if(t.data&&t.data.Message)switch(n){case 405:return t.config.url+" does not support method "+t.config.method;default:return t.data.Message}return t.statusText}var t={0:"Internal Error",1:"Invalid Request",400:"Bad Request",401:"User is not authorized to use this resource",403:"User is forbidden from accessing the resource",405:"Method Not Allowed",407:"Proxy Authentication Required",408:"Request Timeout"};return{handleHttpServerError:i}}angular.module("app").factory("errorFactory",n);n.$inject=["$rootScope"]}(),function(){"use strict";function n(n,t,i){function u(n){return r(n,i+"Lookup/GetCompanTypes")}function f(n){return r(n,i+"Lookup/GetSubCategories")}function r(i,r){var u=t.defer();return n({method:"POST",url:r,data:i}).success(function(n){u.resolve(n)}),u.promise}return{getCompanyTypes:u,getSubCategories:f}}angular.module("app").factory("lookupApiFactory",n);n.$inject=["$http","$q","ServerApiBaseUrl"]}(),function(){"use strict";function n(n){function t(t){if(t&&t.templateUrl&&t.controller&&t.scope){var r=t.animation?t.animation:!1,i=t.size?t.size:"lg";return n.open({templateUrl:t.templateUrl,controller:t.controller,parent:angular.element(document.body),clickOutsideToClose:!1,fullscreen:!1,backdrop:"static",escapeToClose:!1,scope:t.scope,size:i})}}return{open:t}}angular.module("app").factory("notificationFactory",n);n.$inject=["$uibModal"]}(),function(){"use strict";function n(n,t,i,r){function u(t){var u=i.defer();return n({method:"POST",url:r+"Product/GetAppProducts",data:t}).success(function(n){u.resolve({Products:n.Items,TotalProducts:n.TotalItems})}),u.promise}function f(t){var u=i.defer();return n({method:"POST",url:r+"Product/FetchProduct/?productId="+t}).success(function(n){u.resolve({Product:n.Item})}),u.promise}function e(t){var u=i.defer();return n({method:"POST",url:r+"PromotionProduct/GetAppPromotionProducts",data:t}).success(function(n){u.resolve({PromotionProducts:n.Items,TotalPromotionProducts:n.TotalItems})}),u.promise}return{getProducts:u,getPromotionProducts:e,getProduct:f}}angular.module("app").factory("productApiFactory",n);n.$inject=["$http","$rootScope","$q","ServerApiBaseUrl"]}(),function(){"use strict";function n(){function n(n){return n?n instanceof Date?n:new Date(t(n),i(n),r(n)):""}function t(n){return n.split("/")[2].split(" ")[0]}function i(n){var t=n.split("/")[1];return t>0&&(t=t-1),t}function r(n){return n.split("/")[0]}return{stringToDate:n}}angular.module("app").factory("utilsFactory",n)}(),function(){"use strict";function n(){function n(n){if(isNaN(n))return n;var t=parseFloat(n);return(t*100).toFixed(2)}return n}angular.module("app").filter("percentageFilter",n)}(),function(){"use strict";function n(n,t,i){function u(){}function f(){}function e(){}function o(){i.LogOut()}var r=n;r.viewProfile=u;r.changePassword=f;r.editOrganisation=e;r.logout=o;n.$on("server-error-occurred",function(n,i){i.controller=errorController;t.open(i)})}angular.module("app").controller("headerController",n);n.$inject=["$scope","notificationFactory","appFactory"]}(),function(){"use strict";function n(n,t){function r(){t.go("main")}var i=n;i.goToMain=r}angular.module("app").controller("homeController",n);n.$inject=["$scope","$state"]}(),function(){"use strict";function n(n,t,i,r){function f(n){n.preventDefault();r.searchFilter={};t.go("salons")}function e(n){n.preventDefault();t.go("promotionproducts")}function o(){r.searchFilter={SearchText:u.SearchFilter.SearchText,SubCategoryId:u.SearchFilter.SubCategoryId};t.go("salons")}var u=n;u.goToSalons=f;u.goToPromotions=e;u.subCategories=[];u.SearchFilter={};u.searchSalons=o;i.getSubCategories({PageData:{IncludeAllData:!0}}).then(function(n){u.subCategories=n.Items})}angular.module("app").controller("mainController",n);n.$inject=["$scope","$state","lookupApiFactory","salonsFactory","geolocation"]}(),function(){"use strict";function n(n,t,i,r,u,f,e){function s(){o.promotionProductsGrid.SetPage(null,1)}function h(n){t.go("salondirection",{salonId:n})}var o=n;o.searchPromotionProducts=s;o.goToSalonDirection=h;o.subCategories=[];o.promotions=[];o.SearchFilter={PageData:{Take:30,Skip:0},SearchText:u.searchFilter.SearchText,SubCategoryId:u.searchFilter.SubCategoryId};o.promotionProductsGridOptions={Paging:{PageIndex:1,PageSize:30},PageSizes:[30,40,60,90,100],Read:function(n){var t=this;i.isDataLoading=!0;i.loadingMessage="Loading data, please wait ...";o.SearchFilter.PageData.Take=n.take;o.SearchFilter.PageData.Skip=n.skip;r.getPromotionProducts(o.SearchFilter).then(function(n){o.promotionProductsGrid.SetDataSource(n.PromotionProducts,n.TotalPromotionProducts);i.isDataLoading=!1})}};i.isLoading=!0;navigator.geolocation.getCurrentPosition(function(n){i.isLoading=!1;o.SearchFilter.Latitude=n.coords.latitude;o.SearchFilter.Longitude=n.coords.longitude;e.getSubCategories({PageData:{IncludeAllData:!0}}).then(function(n){o.subCategories=n.Items;r.getPromotionProducts(o.SearchFilter).then(function(n){o.promotions=n.PromotionProducts;i.isDataLoading=!1})})},function(n){var t=i.$new();t.model={ErrorCode:408,ErrorHeader:"Error retrieving location",ErrorDetails:"Error retrieving location, please ensure that gps location is enabled. Error Code: "+n.code+"Error Message: "+n.message};notificationFactory.open({templateUrl:"errortemplate.html",scope:t,size:"sm",controller:errorController})},{maximumAge:3e3,timeout:1e4,enableHighAccuracy:!0})}angular.module("app").controller("promotionProductsController",n);n.$inject=["$scope","$state","$rootScope","productApiFactory","salonsFactory","geolocation","lookupApiFactory"]}(),function(){"use strict";function n(n,t,i,r,u){function o(n){n.preventDefault();i.go("salons")}function s(){i.go("salondirection",{salonId:e})}function h(n,t,i,r){n.preventDefault();f.products=r;f.categoryName=t;f.subCategoryName=i}function c(){f.products=[];f.categoryName="";f.subCategoryName=""}var f=n,e=r.salonId;f.salonFactory=u;f.goToSalonDirections=s;f.goToSalons=o;f.viewProducts=h;f.products=[];f.categoryName="";f.subCategoryName="";f.backToSubCategories=c;f.isLoading=!0;f.salonFactory.initialise(e).then(function(){f.isLoading=!1})}angular.module("app").controller("salonController",n);n.$inject=["$scope","$rootScope","$state","$stateParams","salonFactory"]}(),function(){"use strict";function n(n,t,i,r){function f(t){var r=n.defer(),f={companyPromise:i.getCompany(t),productsPromise:e(t)};return n.all(f).then(function(n){u.salon=n.companyPromise.Company;r.resolve()}),r.promise}function e(t){var i=n.defer(),f={PageData:{Take:30,Skip:0},SearchText:"",CompanyId:t,IsCompanySearch:!0};return r.getProducts(f).then(function(n){var t=_.groupBy(n.Products,function(n){return n.CategoryName});_.each(_.keys(t),function(n){t[n]=_.groupBy(t[n],function(n){return n.SubCategoryName})});u.products=t;i.resolve()}),i.promise}var u={initialise:f,salon:{},products:[]};return u}angular.module("app").factory("salonFactory",n);n.$inject=["$q","$rootScope","companyApiFactory","productApiFactory"]}(),function(){"use strict";function n(n,t,i,r,u,f){function s(i){n.map.center={latitude:i.coords.latitude,longitude:i.coords.longitude};e.showList=!1;e.salonDirectionFactory.initialise(o).then(function(){var i=new google.maps.DirectionsRenderer,u=new google.maps.DirectionsService,s=new google.maps.Geocoder,r={origin:{lat:e.map.center.latitude,lng:e.map.center.longitude},destination:{lat:Number(e.salonDirectionFactory.salon.PhysicalAddressLatitude),lng:Number(e.salonDirectionFactory.salon.PhysicalAddressLongitude)}},o={origin:r.origin,destination:r.destination,travelMode:google.maps.DirectionsTravelMode.DRIVING};u.route(o,function(r,u){if(u===google.maps.DirectionsStatus.OK)i.setDirections(r),i.setMap(n.map.control.getGMap()),i.setPanel(document.getElementById("directionsList")),e.showList=!0,t.isLoading=!1;else{var o=t.$new();o.model={ErrorCode:408,ErrorHeader:"Error retrieving route",ErrorDetails:"Error retrieving route, please ensure that gps location is enabled."};f.open({templateUrl:"errortemplate.html",scope:o,size:"sm",controller:errorController});t.isLoading=!1}})})}function h(n){var i=t.$new();i.model={ErrorCode:408,ErrorHeader:"Error retrieving location",ErrorDetails:"Error retrieving location, please ensure that gps location is enabled. Error Code: "+n.code+"Error Message: "+n.message};f.open({templateUrl:"errortemplate.html",scope:i,size:"sm",controller:errorController})}function c(n){n.preventDefault();i.go("salons")}var e=n,o=r.salonId;n.map={control:{},center:{latitude:-26.1706755,longitude:28.0483971},zoom:14};t.isLoading=!0;e.ViewType="Map";e.salonDirectionFactory=u;e.goToSalons=c;e.showList=!1;navigator.geolocation.getCurrentPosition(s,h,{maximumAge:3e3,timeout:1e4,enableHighAccuracy:!0})}angular.module("app").controller("salonDirectionController",n);n.$inject=["$scope","$rootScope","$state","$stateParams","salonDirectionFactory","notificationFactory"]}(),function(){"use strict";function n(n,t,i){function u(t){var u=n.defer();return i.getCompany(t).then(function(n){r.salon=n.Company;u.resolve()}),u.promise}var r={initialise:u,salon:{}};return r}angular.module("app").factory("salonDirectionFactory",n);n.$inject=["$q","$rootScope","companyApiFactory"]}(),function(){"use strict";function n(n,t,i,r,u,f,e){function s(){t.isLoading=!0;navigator.geolocation.getCurrentPosition(a,v,{maximumAge:3e3,timeout:1e4,enableHighAccuracy:!0})}function h(n){n.preventDefault();i.go("main")}function c(n){i.go("salon",{salonId:n.Id})}function l(n){u.salon=n;i.go("salondirection",{salonId:n.Id})}function a(n){o.SearchFilter.Latitude=n.coords.latitude;o.SearchFilter.Longitude=n.coords.longitude;f.getSubCategories({PageData:{IncludeAllData:!0}}).then(function(n){o.subCategories=n.Items;o.salonsFactory.searchSalons(o.SearchFilter).then(function(){t.isLoading=!1},function(){t.isLoading=!1})},function(){t.isLoading=!1})}function v(n){var i=t.$new();i.model={ErrorCode:408,ErrorHeader:"Error retrieving location",ErrorDetails:"Error retrieving location, please ensure that gps location is enabled. Error Code: "+n.code+"Error Message: "+n.message};e.open({templateUrl:"errortemplate.html",scope:i,size:"sm",controller:errorController})}var o=n;t.isLoading=!1;o.salonsFactory=r;o.searchSalons=s;o.goToSalon=c;o.goToMain=h;o.goToSalonDirection=l;o.subCategories=[];o.SearchFilter={PageData:{Take:30,Skip:0},SearchText:r.searchFilter.SearchText,SubCategoryId:r.searchFilter.SubCategoryId,IsLocationSearch:!0};s()}angular.module("app").controller("salonsController",n);n.$inject=["$scope","$rootScope","$state","salonsFactory","salonDirectionFactory","lookupApiFactory","notificationFactory"]}(),function(){"use strict";function n(n,t,i){function u(t){var u=n.defer();return i.getCompanies(t).then(function(n){r.salons=n.Companies;u.resolve()}),u.promise}var r={searchSalons:u,searchFilter:{},salons:[]};return r}angular.module("app").factory("salonsFactory",n);n.$inject=["$q","$rootScope","companyApiFactory"]}();